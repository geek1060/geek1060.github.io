<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Classified War-Room Interface</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Inter&display=swap" rel="stylesheet">

<style>
body{
  margin:0; background:#000308; color:#7ed6ff; overflow:hidden;
  font-family:Inter;
}

/* Pentagon Glass Grid */
body::before{
  content:""; position:fixed; inset:0;
  background:radial-gradient(circle at center, rgba(0,50,120,0.15), transparent),
             linear-gradient(#0c2a44 1px, transparent 1px),
             linear-gradient(90deg,#0c2a44 1px, transparent 1px);
  background-size:120px 120px;
  z-index:-2;
}

/* Holographic HUD Panels */
.panel{
  position:fixed;
  background:rgba(10,30,60,0.45);
  border:1px solid rgba(100,200,255,0.3);
  backdrop-filter:blur(20px);
  padding:16px;
  box-shadow:0 0 25px rgba(100,200,255,0.2);
}

#leftPanel{top:20px; left:20px; width:380px;}
#rightPanel{top:20px; right:20px; width:380px;}
#bottomPanel{bottom:20px; left:50%; transform:translateX(-50%); width:70%;}

h1,h2{font-family:Orbitron;}
h1{font-size:20px;}
h2{font-size:14px;}

.tag{border:1px solid #3aa3ff; padding:4px 8px; display:inline-block; margin:2px; font-size:12px;}

#inputVideo{display:none;}
</style>
</head>

<body>
<video id="inputVideo" autoplay></video>

<div id="leftPanel" class="panel">
<h1>WAR-ROOM DIGITAL TWIN</h1>
<p>Commander: Shreyas G</p>
<div class="tag">Orbital Twin</div>
<div class="tag">AI Threat Analysis</div>
<div class="tag">Space Ops</div>
</div>

<div id="rightPanel" class="panel">
<h2>TACTICAL STATUS</h2>
<p>Earth System: ONLINE</p>
<p>Gesture Control: ACTIVE</p>
<p>Data Link: SIMULATED</p>
</div>

<div id="bottomPanel" class="panel">
> SECURE OPS ROOM UI LOADED  
> HUMAN-MACHINE INTERFACE ACTIVE  
> FINGER CONTROL ENABLED  
</div>

<script>
// ================= THREE WAR ROOM EARTH ==================
let scene = new THREE.Scene();
let camera = new THREE.PerspectiveCamera(45, innerWidth/innerHeight, 0.1, 1000);
camera.position.z = 4;

let renderer = new THREE.WebGLRenderer({alpha:true, antialias:true});
renderer.setSize(innerWidth, innerHeight);
document.body.appendChild(renderer.domElement);

// Earth
let earth = new THREE.Mesh(
  new THREE.SphereGeometry(1,64,64),
  new THREE.MeshPhongMaterial({
    map:new THREE.TextureLoader().load("https://threejs.org/examples/textures/planets/earth_atmos_2048.jpg"),
    emissive:new THREE.Color(0x112244)
  })
);
scene.add(earth);

// Lights
scene.add(new THREE.DirectionalLight(0xffffff,1).position.set(5,2,5));
scene.add(new THREE.AmbientLight(0x223355));

// Tactical Orbit Rings
for(let i=0;i<5;i++){
  let ring = new THREE.Mesh(
    new THREE.RingGeometry(1.2+i*0.2,1.2+i*0.2,128),
    new THREE.MeshBasicMaterial({color:0x00aaff, side:THREE.DoubleSide, transparent:true, opacity:0.2})
  );
  ring.rotation.x=Math.PI/2;
  scene.add(ring);
}

// Render Loop
function animate(){
  requestAnimationFrame(animate);
  earth.rotation.y += 0.0003;
  renderer.render(scene,camera);
}
animate();

onresize=()=>{
  camera.aspect=innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth, innerHeight);
};

// ================= HOLOGRAPHIC HAND CONTROL =================
const video = document.getElementById("inputVideo");

const hands = new Hands({
  locateFile: f => `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${f}`
});
hands.setOptions({maxNumHands:1, modelComplexity:1, minDetectionConfidence:0.7, minTrackingConfidence:0.7});

let lastX=null, lastY=null;

hands.onResults(res=>{
  if(!res.multiHandLandmarks) return;
  let lm = res.multiHandLandmarks[0];
  let index = lm[8];
  let thumb = lm[4];

  let pinch = Math.hypot(index.x-thumb.x, index.y-thumb.y);

  // PINCH = ROTATE EARTH
  if(pinch<0.04){
    if(lastX){
      earth.rotation.y += (index.x-lastX)*5;
      earth.rotation.x += (index.y-lastY)*5;
    }
    lastX=index.x; lastY=index.y;
  } else {
    lastX=null;
  }
});

// Camera feed
const cam = new Camera(video,{
  onFrame: async()=>await hands.send({image:video}),
  width:640,height:480
});
cam.start();
</script>
</body>
</html>
